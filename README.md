# FTD Tracker

Современная веб-система для учета статистики FTD (First Time Deposits) и автоматического расчета зарплат менеджеров.

## Описание

FTD Tracker — это одностраничное веб-приложение, разработанное на React, которое позволяет:

- Ведение учета FTD (первых депозитов) с детальной информацией
- Автоматический расчет зарплат менеджеров на основе тарифной сетки
- Аналитика и статистика по периодам
- Управление менеджерами и их данными
- Отслеживание планов и целей
- Учет штрафов и бонусов
- Учет посещаемости
- Локальное хранение данных в IndexedDB

## Технологии

- **React 18.2.0** — UI библиотека
- **IndexedDB** (через idb) — локальное хранилище данных
- **date-fns** — работа с датами
- **Babel Standalone** — транспиляция JSX в браузере
- **Vanilla JavaScript** — без сборщиков, работает напрямую в браузере

## Требования

- Современный браузер с поддержкой ES6+ и IndexedDB
- Локальный веб-сервер (для корректной работы IndexedDB)

## Установка и настройка

### 1. Клонирование репозитория

```bash
git clone https://github.com/sergeimastivskiy-ship-it/ftdrec.git
cd ftdrec
```

### 2. Настройка конфигурации

1. Скопируйте файл `config.example.js` в `config.js`:
   ```bash
   cp config.example.js config.js
   ```

2. Откройте `config.js` и настройте параметры:
   - Пользователи и пароли для входа
   - Имя тимлида и его ставка
   - Тарифная сетка для расчета зарплат
   - Список менеджеров
   - Опции трафика и стран
   - Параметры бонусов и штрафов

**ВАЖНО:** Файл `config.js` содержит чувствительную информацию (пароли, ставки). Не коммитьте его в публичный репозиторий!

### 3. Запуск приложения

#### Вариант 1: Простой HTTP-сервер (Python)

```bash
# Python 3
python -m http.server 8000

# Python 2
python -m SimpleHTTPServer 8000
```

#### Вариант 2: Node.js (http-server)

```bash
npm install -g http-server
http-server -p 8000
```

#### Вариант 3: Live Server (VS Code)

Установите расширение "Live Server" в VS Code и запустите через контекстное меню файла `pop.html`.

### 4. Открытие в браузере

Откройте в браузере:

```
http://localhost:8000/pop.html
```

## Использование

### Вход в систему

1. Откройте приложение в браузере
2. Введите логин и пароль (настроены в `config.js`)
3. Нажмите "Войти"

### Основные функции

#### Учет FTD

- Добавление новых записей о депозитах
- Указание менеджера, даты, суммы, трафика и страны
- Автоматическая валидация данных

#### Расчет зарплат

- Автоматический расчет на основе тарифной сетки
- Учет количества FTD за период
- Применение бонусов и штрафов
- Расчет зарплаты тимлида с дополнительными бонусами

#### Статистика

- Просмотр статистики по периодам (месяц, год)
- Фильтрация по менеджерам
- Экспорт данных в JSON

#### Настройки

- Управление тарифной сеткой
- Настройка планов и целей
- Управление менеджерами
- Учет посещаемости

## Структура проекта

```
FTD/
├── api/
│   ├── auth.js           # Serverless API - авторизация
│   └── verify-password.js # Serverless API - проверка пароля
├── index.html            # Основной HTML файл с приложением
├── config.js             # Конфигурационный файл (не в git)
├── config.example.js     # Пример конфигурации
├── vercel.json           # Конфигурация Vercel
├── .gitignore            # Исключения для git
└── README.md             # Документация
```

## Деплой на Vercel

### 1. Подготовка

Проект уже настроен для деплоя на Vercel с защитой паролей:
- `api/auth.js` — авторизация пользователей
- `api/verify-password.js` — проверка пароля настроек
- `vercel.json` — конфигурация Vercel
- `.gitignore` — исключает `config.js` из репозитория

### 2. Деплой

```bash
# Установите Vercel CLI
npm install -g vercel

# Залогиньтесь
vercel login

# Задеплойте
vercel
```

Или подключите репозиторий GitHub напрямую в [Vercel Dashboard](https://vercel.com/dashboard).

### 3. Настройка переменных окружения

В Vercel Dashboard → ваш проект → **Settings** → **Environment Variables** добавьте:

| Имя переменной | Значение | Описание |
|----------------|----------|----------|
| `USER_TIM_PASSWORD` | `ваш_пароль` | Пароль пользователя "tim" |
| `USER_1_PASSWORD` | `ваш_пароль` | Пароль пользователя "1" |
| `USER_ADMIN_PASSWORD` | `ваш_пароль` | Пароль админа (опционально) |
| `TEAM_LEADER_SALARY_PASSWORD` | `ваш_пароль` | Пароль для настроек и зарплаты тим-лидера |

**Важно:** После добавления переменных сделайте Redeploy для применения изменений.

### 4. Загрузка config.js на Vercel

Так как `config.js` не в репозитории, нужно загрузить его отдельно:

**Вариант А:** Через Vercel Dashboard → Deployments → редактирование файлов

**Вариант B:** Создать `config.js` локально и задеплоить через CLI:
```bash
vercel --prod
```

### 5. Локальная разработка

Для локальной разработки приложение автоматически использует пароли из `config.js`, если API недоступен.

## Безопасность

### На Vercel (рекомендуется)
- Пароли хранятся в переменных окружения Vercel
- API проверяет пароли на сервере
- Пароли НЕ попадают в браузер

### Локально
- **Не коммитьте `config.js`** в публичный репозиторий
- Используйте `.gitignore` для исключения чувствительных файлов
- Пароли хранятся в `config.js` (для локального использования)

## Хранение данных

Все данные хранятся локально в браузере через IndexedDB:

- Записи FTD
- Штрафы и бонусы
- Настройки тарифов
- Планы и цели
- Посещаемость

Данные можно экспортировать в JSON и импортировать обратно.

## Особенности интерфейса

- Современный дизайн с градиентами и анимациями
- Адаптивная верстка
- Glassmorphism эффекты
- Плавные переходы и анимации
- Интуитивно понятный интерфейс

## Лицензия

Проект для внутреннего использования.

## Автор

Сергей Мастиновский

## Обновления

Все изменения отслеживаются в истории коммитов Git.

---

**Примечание:** Для работы приложения необходим локальный веб-сервер из-за ограничений безопасности браузера при работе с IndexedDB через `file://` протокол.
